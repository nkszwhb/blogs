(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{541:function(t,c,r){"use strict";r.r(c);var a=r(9),e=Object(a.a)({},(function(){var t=this,c=t.$createElement,r=t._self._c||c;return r("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[r("h2",{attrs:{id:"cherry-pick"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#cherry-pick"}},[t._v("#")]),t._v(" cherry-pick")]),t._v(" "),r("p",[t._v("【官方教程】 "),r("a",{attrs:{href:"https://git-scm.com/docs/git-cherry-pick",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://git-scm.com/docs/git-cherry-pick"),r("OutboundLink")],1),t._v("\n【阮一峰教程】"),r("a",{attrs:{href:"http://www.ruanyifeng.com/blog/2020/04/git-cherry-pick.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("http://www.ruanyifeng.com/blog/2020/04/git-cherry-pick.html"),r("OutboundLink")],1)]),t._v(" "),r("h3",{attrs:{id:"描述"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#描述"}},[t._v("#")]),t._v(" 描述")]),t._v(" "),r("blockquote",[r("p",[t._v("给出一个或多个现有的提交，应用每个提交所带来的变化，为每个提交记录一个新的提交。这需要您的工作树是干净的（没有对 HEAD 提交的修改）。")])]),t._v(" "),r("p",[t._v("将已经提交的 commit，复制出新的 commit 应用到分支里")]),t._v(" "),r("h3",{attrs:{id:"应用场景"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#应用场景"}},[t._v("#")]),t._v(" 应用场景")]),t._v(" "),r("p",[t._v("commit 都提交了，为什么还要复制新的出来？")]),t._v(" "),r("p",[t._v("应用场景1：有时候版本的一些优化需求开发到一半，可能其中某一个开发完的需求要临时上，或者某些原因导致待开发的需求卡住了已开发完成的需求上线。这时候就需要把 commit 抽出来，单独处理。")]),t._v(" "),r("p",[t._v("应用场景2：有时候开发分支中的代码记录被污染了，导致开发分支合到线上分支有问题，这时就需要拉一条干净的开发分支，再从旧的开发分支中，把 commit 复制到新分支。")]),t._v(" "),r("h3",{attrs:{id:"命令使用"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#命令使用"}},[t._v("#")]),t._v(" 命令使用")]),t._v(" "),r("h4",{attrs:{id:"复制单个"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#复制单个"}},[t._v("#")]),t._v(" 复制单个")]),t._v(" "),r("p",[t._v("现在有一条feature分支，commit 记录如下：")]),t._v(" "),r("p",[r("img",{attrs:{src:"https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/4ab7e1f5b9fe498387f8f3e395a50907~tplv-k3u1fbpfcp-zoom-in-crop-mark:1304:0:0:0.awebp",alt:"img"}})]),t._v(" "),r("p",[t._v("需要把 b 复制到另一个分支，首先把 commitHash 复制下来，然后切到 master 分支。")]),t._v(" "),r("p",[r("img",{attrs:{src:"https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/3edef9dcb72c4efd9e7305d94303e468~tplv-k3u1fbpfcp-zoom-in-crop-mark:1304:0:0:0.awebp",alt:"img"}})]),t._v(" "),r("p",[t._v("当前 master 最新的记录是 a，使用 "),r("code",[t._v("cherry-pick")]),t._v(" 把 b 应用到当前分支。")]),t._v(" "),r("p",[r("img",{attrs:{src:"https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/c2961c8444a543acb9e686123a4e47b8~tplv-k3u1fbpfcp-zoom-in-crop-mark:1304:0:0:0.awebp",alt:"img"}})]),t._v(" "),r("p",[t._v("完成后看下最新的 log，b 已经应用到 master，作为最新的 commit 了。可以看到 commitHash 和之前的不一样，但是提交时间还是保留之前的。")]),t._v(" "),r("h4",{attrs:{id:"复制多个"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#复制多个"}},[t._v("#")]),t._v(" 复制多个")]),t._v(" "),r("p",[t._v("以上是单个 commit 的复制，下面再来看看 "),r("code",[t._v("cherry-pick")]),t._v(" 多个 commit 要如何操作。")]),t._v(" "),r("ul",[r("li",[t._v("一次转移多个提交：")])]),t._v(" "),r("div",{staticClass:"language-sh extra-class"},[r("pre",{pre:!0,attrs:{class:"language-sh"}},[r("code",[r("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" cherry-pick commit1 commit2\n")])])]),r("p",[t._v("上面的命令将 commit1 和 commit2 两个提交应用到当前分支。")]),t._v(" "),r("ul",[r("li",[t._v("多个连续的commit，也可区间复制：")])]),t._v(" "),r("div",{staticClass:"language-sh extra-class"},[r("pre",{pre:!0,attrs:{class:"language-sh"}},[r("code",[r("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" cherry-pick commit1^"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v("commit2\n")])])]),r("p",[t._v("上面的命令将 commit1 到 commit2 这个区间的 commit 都应用到当前分支（包含commit1、commit2），commit1 是最早的提交。")]),t._v(" "),r("h3",{attrs:{id:"cherry-pick-代码冲突"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#cherry-pick-代码冲突"}},[t._v("#")]),t._v(" cherry-pick 代码冲突")]),t._v(" "),r("p",[t._v("在 "),r("code",[t._v("cherry-pick")]),t._v(" 多个commit时，可能会遇到代码冲突，这时 "),r("code",[t._v("cherry-pick")]),t._v(" 会停下来，让用户决定如何继续操作。下面看看怎么解决这种场景。")]),t._v(" "),r("p",[r("img",{attrs:{src:"https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/e7c77959a8dd4e8784115430080fd930~tplv-k3u1fbpfcp-zoom-in-crop-mark:1304:0:0:0.awebp",alt:"img"}})]),t._v(" "),r("p",[t._v("还是 feature 分支，现在需要把 c、d、e 都复制到 master 分支上。先把起点c和终点e的 commitHash 记下来。")]),t._v(" "),r("p",[r("img",{attrs:{src:"https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/90769bd62a294accbd6073c41339310d~tplv-k3u1fbpfcp-zoom-in-crop-mark:1304:0:0:0.awebp",alt:"img"}})]),t._v(" "),r("p",[t._v("切到 master 分支，使用区间的 "),r("code",[t._v("cherry-pick")]),t._v("。可以看到 c 被成功复制，当进行到 d 时，发现代码冲突，"),r("code",[t._v("cherry-pick")]),t._v(" 中断了。这时需要解决代码冲突，重新提交到暂存区。")]),t._v(" "),r("p",[r("img",{attrs:{src:"https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/94097be42d0a4caaaeaccf8a3c2d71b2~tplv-k3u1fbpfcp-zoom-in-crop-mark:1304:0:0:0.awebp",alt:"img"}})]),t._v(" "),r("p",[t._v("然后使用 "),r("code",[t._v("cherry-pick --continue")]),t._v(" 让 "),r("code",[t._v("cherry-pick")]),t._v(" 继续进行下去。最后 e 也被复制进来，整个流程就完成了。")]),t._v(" "),r("p",[t._v("以上是完整的流程，但有时候可能需要在代码冲突后，放弃或者退出流程：")]),t._v(" "),r("ul",[r("li",[t._v("放弃 "),r("code",[t._v("cherry-pick")]),t._v("：")])]),t._v(" "),r("div",{staticClass:"language-sh extra-class"},[r("pre",{pre:!0,attrs:{class:"language-sh"}},[r("code",[t._v("gits cherry-pick --abort\n")])])]),r("p",[t._v("回到操作前的样子，就像什么都没发生过。")]),t._v(" "),r("ul",[r("li",[t._v("退出 "),r("code",[t._v("cherry-pick")]),t._v("：")])]),t._v(" "),r("div",{staticClass:"language-sh extra-class"},[r("pre",{pre:!0,attrs:{class:"language-sh"}},[r("code",[r("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" cherry-pick --quit\n")])])]),r("p",[t._v("不回到操作前的样子。即保留已经 "),r("code",[t._v("cherry-pick")]),t._v(" 成功的 commit，并退出 "),r("code",[t._v("cherry-pick")]),t._v(" 流程。")])])}),[],!1,null,null,null);c.default=e.exports}}]);